<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />

    <script src="../../dist/wuf.js"></script>
    <!--<script src="../../devtools/inspect.js"></script>-->
</head>
<body>
<script>
    window.onload = function() {
        class Example extends wuf.Application {
            static _template() {
                return {
                    Rect: {rect: true, w: 1000, h: 1000},
                    Example: {scale: 0.5, pivot: 0},
                    ExampleB: {scale: 0.25, pivot: 0},
                    ExampleC: {scale: 0.25, pivot: 0, x: 600}
                }
            }

            loadRandomImage() {
                const images = ["pexels-photo-417074.jpeg", "pexels-photo-733848.jpeg", "bridge-rotterdam-erasmus-blue-735790.jpeg", "test1.png"]
                const filename = images[Math.floor(Math.random() * images.length)] + "?r=" + Math.random()

                const target = app.children[Math.floor(Math.random() * app.children.length)]
                target.src = filename

                setTimeout(() => {
                    target.src = ""
                }, Math.random() * 100)

            }

            static _states() {
                return {
                    _init: function() {
                        this.tag("Example").animation({duration: 1.4, repeat: -1, actions: [{p: 'x', v: {0:-200, 0.5: 200, 1: -200}}]}).start()
                        setInterval(() => {
                            this.loadRandomImage()
                        }, 200)
                    }
                }
            }
        }

        const options = {stage: {w: 900, h: 900, glClearColor: 0xFF000000, useImageWorker: true}, debug: true}
        options.keys = {
            38: "Up",
            40: "Down",
            37: "Left",
            39: "Right",
            13: "Enter",
            9: "Back",
            8: "Back",
            93: "Back",
            174: "Back",
            175: "Menu",
            83: "Search"
        };

        const app = new Example(options);

        document.body.appendChild(app.stage.getCanvas());
    }
</script>
</body>
</html>
